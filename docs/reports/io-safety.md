# 繝ｬ繝昴・繝・ 蜴溷ｭ千噪譖ｸ縺崎ｾｼ縺ｿ繝ｻ繝舌ャ繧ｯ繧｢繝・・/蠕ｩ譌ｧ (`io-safety`)

## 螳滓命讎りｦ・
- 險ｭ螳壹ヵ繧｡繧､繝ｫ縺ｨ繧ｿ繧ｹ繧ｯ繝輔ぃ繧､繝ｫ縺ｮ譖ｸ縺崎ｾｼ縺ｿ蜃ｦ逅・ｒ蜴溷ｭ千噪譖ｸ縺崎ｾｼ縺ｿ縺ｫ螟画峩縺励√ョ繝ｼ繧ｿ遐ｴ謳阪・繝ｪ繧ｹ繧ｯ繧剃ｽ取ｸ帙＠縺溘・- `utils/file_io.py` 縺ｫ豎守畑逧・↑蜴溷ｭ千噪譖ｸ縺崎ｾｼ縺ｿ髢｢謨ｰ `atomic_write_json()` 繧貞ｮ溯｣・＠縺溘・- `config.py` 縺ｮ4縺､縺ｮ `_save_*` 繝｡繧ｽ繝・ラ繧貞次蟄千噪譖ｸ縺崎ｾｼ縺ｿ縺ｫ螟画峩縺励∵里蟄倥・繧､繝ｳ繧ｿ繝ｼ繝輔ぉ繝ｼ繧ｹ繧堤ｶｭ謖√＠縺溘・
## 螳溯｣・・螳ｹ

### 1. 蜴溷ｭ千噪譖ｸ縺崎ｾｼ縺ｿ髢｢謨ｰ縺ｮ螳溯｣・ｼ・utils/file_io.py`・・
譁ｰ隕上ヵ繧｡繧､繝ｫ `utils/file_io.py` 繧剃ｽ懈・縺励∽ｻ･荳九・讖溯・繧貞ｮ溯｣・ｼ・
- **荳譎ゅヵ繧｡繧､繝ｫ縺ｸ縺ｮ譖ｸ縺崎ｾｼ縺ｿ**: `.tmp` 繝輔ぃ繧､繝ｫ縺ｫ繝・・繧ｿ繧呈嶌縺崎ｾｼ縺ｿ
- **蜴溷ｭ千噪繝ｪ繝阪・繝**: `os.replace()` 繧剃ｽｿ逕ｨ縺励※荳譎ゅヵ繧｡繧､繝ｫ繧貞・縺ｮ繝輔ぃ繧､繝ｫ蜷阪↓繝ｪ繝阪・繝
- **繝舌ャ繧ｯ繧｢繝・・菴懈・**: 譌｢蟄倥ヵ繧｡繧､繝ｫ縺後≠繧句ｴ蜷医・ `.bak` 繝舌ャ繧ｯ繧｢繝・・繧剃ｽ懈・
- **閾ｪ蜍募ｾｩ譌ｧ**: 繧ｨ繝ｩ繝ｼ逋ｺ逕滓凾縺ｫ繝舌ャ繧ｯ繧｢繝・・縺九ｉ閾ｪ蜍募ｾｩ譌ｧ繧定ｩｦ縺ｿ繧・- **繝ｭ繧ｰ蜃ｺ蜉・*: DEBUG/INFO/WARNING/ERROR 繝ｬ繝吶Ν縺ｧ隧ｳ邏ｰ縺ｪ繝ｭ繧ｰ繧貞・蜉・
### 2. `config.py` 縺ｮ譖ｴ譁ｰ

莉･荳九・4縺､縺ｮ `_save_*` 繝｡繧ｽ繝・ラ繧貞次蟄千噪譖ｸ縺崎ｾｼ縺ｿ縺ｫ螟画峩・・
- `_save_tasks()`: 繧ｿ繧ｹ繧ｯ繝・・繧ｿ縺ｮ菫晏ｭ・- `_save_logs()`: 繝ｭ繧ｰ繝・・繧ｿ縺ｮ菫晏ｭ・- `_save_settings()`: 險ｭ螳壹ョ繝ｼ繧ｿ縺ｮ菫晏ｭ・- `_save_calendar_overrides()`: 繧ｫ繝ｬ繝ｳ繝繝ｼ繧ｪ繝ｼ繝舌・繝ｩ繧､繝峨ョ繝ｼ繧ｿ縺ｮ菫晏ｭ・
**螟画峩蜀・ｮｹ**:
- `open()` + `json.dump()` 縺ｮ繝代ち繝ｼ繝ｳ繧・`atomic_write_json()` 縺ｫ鄂ｮ縺肴鋤縺・- 譌｢蟄倥・繧､繝ｳ繧ｿ繝ｼ繝輔ぉ繝ｼ繧ｹ・医Γ繧ｽ繝・ラ蜷阪・蠑墓焚繝ｻ謌ｻ繧雁､・峨・邯ｭ謖・- 蜻ｼ縺ｳ蜃ｺ縺怜・縺ｮ繧ｳ繝ｼ繝牙､画峩縺ｯ荳崎ｦ・
### 3. 蜍穂ｽ懃｢ｺ隱・
- 繧｢繝励Μ繧ｱ繝ｼ繧ｷ繝ｧ繝ｳ襍ｷ蜍墓凾縺ｮ蜍穂ｽ懃｢ｺ隱阪ｒ螳滓命
- 繧ｿ繧ｹ繧ｯ霑ｽ蜉繝ｻ邱ｨ髮・・蜑企勁譎ゅ・繝輔ぃ繧､繝ｫ譖ｸ縺崎ｾｼ縺ｿ繧堤｢ｺ隱・- 繝ｭ繧ｰ繝輔ぃ繧､繝ｫ・・app.log`・峨↓ `utils.file_io` 縺九ｉ縺ｮ繝ｭ繧ｰ縺梧ｭ｣蟶ｸ縺ｫ蜃ｺ蜉帙＆繧後ｋ縺薙→繧堤｢ｺ隱・- 荳譎ゅヵ繧｡繧､繝ｫ・・.tmp`・峨ｄ繝舌ャ繧ｯ繧｢繝・・繝輔ぃ繧､繝ｫ・・.bak`・峨′豁｣蟶ｸ邨ゆｺ・凾縺ｫ蜑企勁縺輔ｌ繧九％縺ｨ繧堤｢ｺ隱・
## 螳溯｣・・迚ｹ蠕ｴ

### 蠕梧婿莠呈鋤諤ｧ
- 譌｢蟄倥・JSON繝輔ぃ繧､繝ｫ縺ｯ縺昴・縺ｾ縺ｾ菴ｿ逕ｨ蜿ｯ閭ｽ
- 繝輔ぃ繧､繝ｫ蠖｢蠑上ｄ讒矩縺ｯ螟画峩縺励↑縺・- 譌｢蟄倥・API繧､繝ｳ繧ｿ繝ｼ繝輔ぉ繝ｼ繧ｹ縺ｯ邯ｭ謖・
### 繝・・繧ｿ菫晁ｭｷ
- 譖ｸ縺崎ｾｼ縺ｿ螟ｱ謨玲凾繧よ里蟄倥ヵ繧｡繧､繝ｫ縺檎ｴ謳阪＠縺ｪ縺・- 繧ｨ繝ｩ繝ｼ譎ゅ↓繝舌ャ繧ｯ繧｢繝・・縺九ｉ閾ｪ蜍募ｾｩ譌ｧ繧定ｩｦ縺ｿ繧・- 隧ｳ邏ｰ縺ｪ繝ｭ繧ｰ蜃ｺ蜉帙〒繝・ヰ繝・げ縺ｨ繝医Λ繝悶Ν繧ｷ繝･繝ｼ繝・ぅ繝ｳ繧ｰ繧呈髪謠ｴ

### 繝代ヵ繧ｩ繝ｼ繝槭Φ繧ｹ
- 蜴溷ｭ千噪譖ｸ縺崎ｾｼ縺ｿ縺ｯ騾壼ｸｸ縺ｮ譖ｸ縺崎ｾｼ縺ｿ繧医ｊ闍･蟷ｲ繧ｪ繝ｼ繝舌・繝倥ャ繝峨′縺ゅｋ縺後∝ｮ溽畑逧・↑遽・峇蜀・- 繝舌ャ繧ｯ繧｢繝・・菴懈・縺ｯ譌｢蟄倥ヵ繧｡繧､繝ｫ縺後≠繧句ｴ蜷医・縺ｿ螳溯｡後＆繧後ｋ

## 繝ｭ繧ｰ蜃ｺ蜉帑ｾ・
```
2025-11-18 14:03:19,179 - utils.file_io - INFO - 繝輔ぃ繧､繝ｫ繧貞次蟄千噪縺ｫ譖ｸ縺崎ｾｼ縺ｿ縺ｾ縺励◆: data\tasks.json
2025-11-18 14:03:19,179 - config - INFO - 繧ｿ繧ｹ繧ｯ繝・・繧ｿ繧剃ｿ晏ｭ倥＠縺ｾ縺励◆: 5莉ｶ
```

DEBUG 繝ｬ繝吶Ν縺ｮ繝ｭ繧ｰ・医ヰ繝・け繧｢繝・・菴懈・縲∽ｸ譎ゅヵ繧｡繧､繝ｫ譖ｸ縺崎ｾｼ縺ｿ髢句ｧ九↑縺ｩ・峨ｒ遒ｺ隱阪☆繧句ｴ蜷医・縲～main.py` 縺ｮ繝ｭ繧ｰ繝ｬ繝吶Ν繧・`DEBUG` 縺ｫ螟画峩蜿ｯ閭ｽ縲・
## 繝｡繝｢

- `.tmp` 繝輔ぃ繧､繝ｫ縺ｯ豁｣蟶ｸ邨ゆｺ・凾縺ｫ閾ｪ蜍募炎髯､縺輔ｌ繧・- `.bak` 繝輔ぃ繧､繝ｫ縺ｯ譖ｸ縺崎ｾｼ縺ｿ謌仙粥譎ゅ↓閾ｪ蜍募炎髯､縺輔ｌ繧・- 繧ｨ繝ｩ繝ｼ譎ゅ・縺ｿ縺薙ｌ繧峨・繝輔ぃ繧､繝ｫ縺梧ｮ九ｋ蜿ｯ閭ｽ諤ｧ縺後≠繧・- `.gitignore` 縺ｧ `data/` 繝・ぅ繝ｬ繧ｯ繝医Μ蜈ｨ菴薙′髯､螟悶＆繧後※縺・ｋ縺溘ａ縲～.bak` 縺ｨ `.tmp` 繝輔ぃ繧､繝ｫ繧り・蜍慕噪縺ｫ髯､螟悶＆繧後ｋ
- 繝ｭ繧ｰ繝ｬ繝吶Ν繧・`DEBUG` 縺ｫ險ｭ螳壹☆繧九→縲√ｈ繧願ｩｳ邏ｰ縺ｪ諠・ｱ縺悟ｾ励ｉ繧後ｋ
